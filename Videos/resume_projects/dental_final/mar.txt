<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welldent Dental Lab Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: url('bg4.jpg') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .main-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 80%;
            height: 80%;
            overflow-y: auto;
            border: 2px solid black;
            padding: 20px;
            border-radius: 10px;
        }

        .form-container,
        .container {
            background: url('teeth.jpg') no-repeat center center;
            background-size: cover;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid black;
            padding: 20px;
            border-radius: 10px;
            
        }

        .container1 {
            background: url('teeth.jpg') no-repeat center center;
            background-size: cover;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            
        }

        .form-container h1,
        .container h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            background-color: black;
            padding: 5px;
            border-radius: 4px;
            

            
        }

        .form-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .form-group label {
            flex: 1;
            color: black;
            background-color: rgb(150, 213, 217);
            padding: 5px;
            border-radius: 4px;
        }

        .form-group1 label {
            flex: 3;
            color: black;
            margin-right: 5px;
            margin-left: 0px;
            background-color: rgb(150, 213, 217);
            padding: 5px;
            border-radius: 4px;
        }

        .form-group1 input[type="text"],
        .checkbox-group {
            flex: 2;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            color: black;
        }

        .form-group input[type="text"],
        .checkbox-group {
            flex: 2;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            color: black;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
        }

        .checkbox-group label {
            margin-right: 20px;
            color: black;
            background-color: rgb(123, 205, 205);
            padding: 5px;
            border-radius: 4px;
        }

        
        .form-group button {
            display: block;
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 4px;
            background: rgb(135, 202, 222);
            color: black;
            font-size: 16px;
            cursor: pointer;
        }
        
        .form-group button:hover {
            background: rgb(100, 180, 180);
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: Arial, sans-serif;
            margin-top: 50px;
            border: 2px solid black;
            padding: 20px;
            border-radius: 10px;
            
        }

        .row {
            display: flex;
            margin: 5px 0;
        }

        .number {
            margin: 0 5px;
            padding: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .highlighted {
            border: 2px solid brown;
            border-radius: 50%;
            padding: 2px 6px;
        }

        .divider {
            width: 100%;
            height: 2px;
            background-color: rgb(9, 133, 210);
            margin: 5px 0;
        }

        .container1 {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: Arial, sans-serif;
            margin-top: 50px;
            border: 2px solid black;
            padding: 20px;
            border-radius: 10px;
        }

        .pipe {
            position: relative;
            width: 2px;
            height: 20px;
            background-color: black;
            margin: 0 5px;
        }

        #selected-numbers {
            margin-top: 20px;
            font-size: 16px;
            font-weight: bold;
        }

        button[type="submit"] {
    display: block;
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 4px;
    background-color: rgb(135, 202, 222); /* Adjust background color */
    color: black;
    font-size: 16px;
    cursor: pointer;
}

button[type="submit"]:hover {
    background-color: rgb(100, 180, 180); /* Adjust hover background color */
}

        .form-group2 {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }
        .checkbox-container2 {
            display: flex;
            justify-content: space-between;
            width: 80%;
        }
        .column {
            display: flex;
            flex-direction: column;
        }
        .form-group2 input[type="text"] {
            margin-left: 20px;
        }
        .text-fields-container {
            display: none;
        }

        .form-group2 label {
            flex: 1;
            color: black;
            background-color: rgb(150, 213, 217);
            padding: 5px;
            border-radius: 4px;
        }

        .form-group2 label {
            flex: 3;
            color: black;
            margin-right: 5px;
            margin-left: 0px;
            background-color: rgb(150, 213, 217);
            padding: 5px;
            border-radius: 4px;
        }

        .form-group2 input[type="text"],
        .checkbox-group {
            flex: 2;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            color: black;
        }

        .form-group2 input[type="text"],
        .checkbox-group {
            flex: 2;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            color: black;
        }

        




    </style>
</head>

<body>
    <div class="main-container">
     <form id = dentalform>
        <div class="form-container">
            <h1>Welldent Dental Lab</h1>
                <div class="form-group">
                    <label for="drName">DR Name</label>
                    <input type="text" id="drName" name="drName" required>
                </div>
                <div class="form-group">
                    <label for="patientName">Patient Name</label>
                    <input type="text" id="patientName" name="patientName" required>
                </div>
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="text" id="age" name="age" required>
                </div>
                <div class="form-group">
                    <label>Sex</label>
                    <div class="checkbox-group">
                        <label><input id = "sex" type="radio" name="sex" value="F" required> F</label>
                        <label><input id="sex" type="radio" name="sex" value="M"> M</label>
                    </div>
                </div>
                <div class="form-group1">
                    <label for="SrNo">Sr NO.:</label>
                    <input type="text" id="SrNo" name="SrNo" required>
                    <label for="DateOfOrder">Date of order:</label>
                    <input type="date" id="DateOfOrder" name="DateOfOrder" required>
                    <label for="DateOfDelivery">Date of Delivery:</label>
                    <input type="date" id="DateOfDelivery" name="DateOfDelivery" required>
                </div>
    

    </div>
    <div class="container">
        <h1>STAGE FIXED</h1>

            <div class="checkbox-container2">
                <div class="column">
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="PFM" onclick="toggleTextField(this)"> PFM</label>
                        <input type="text" name="PFM_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Ceramic Facing" onclick="toggleTextField(this)"> Ceramic Facing</label>
                        <input type="text" name="Ceramic_Facing_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="CAD CAM PFM (5yr warranty)" onclick="toggleTextField(this)"> CAD CAM PFM (5yr warranty)</label>
                        <input type="text" name="CAD_CAM_PFM_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Zirconia" onclick="toggleTextField(this)"> Zirconia</label>
                        <input type="text" name="Zirconia_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Monolith" onclick="toggleTextField(this)"> Monolith</label>
                        <input type="text" name="Monolith_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="BruxZir" onclick="toggleTextField(this)"> BruxZir</label>
                        <input type="text" name="BruxZir_text" style="display:none;">
                    </div>
                </div>
                <div class="column">
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="E-max Crown/Veneer/Inlay/Onlay" onclick="toggleTextField(this)"> E-max Crown/Veneer/Inlay/Onlay</label>
                        <input type="text" name="E_max_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Implant Cemented/Hollow Type" onclick="toggleTextField(this)"> Implant Cemented/Hollow Type</label>
                        <input type="text" name="Implant_Cemented_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Implant Screw Retained" onclick="toggleTextField(this)"> Implant Screw Retained</label>
                        <input type="text" name="Implant_Screw_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="DMLS" onclick="toggleTextField(this)"> DMLS</label>
                        <input type="text" name="DMLS_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label><input type="checkbox" name="options" value="Tilite" onclick="toggleTextField(this)"> Tilite</label>
                        <input type="text" name="Tilite_text" style="display:none;">
                    </div>
                    <div class="form-group2">
                        <label>
                            <input type="checkbox" id="check1" name="options" value="Other" onclick="toggleTextFields(this)"> Other
                        </label>
                        <input type="text" name="Other_text1" style="display:none;">
                        <input type="text" name="Other_text2" style="display:none;">
                    </div>
                </div>
            </div>
            <div class="form-group2">
                <label for="shade">SHADE</label>
                <input type="text" id="shade" name="SHADE" required>
            </div>
        

    </div>


        <div class="container">
            <h1>Stage (Fixed)</h1>
                <div class="form-group">
                    <input type="checkbox" id="checkbox1" name="checkbox1">
                    <label for="checkbox1">Coping Trial</label>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="checkbox2" name="checkbox2">
                    <label for="checkbox2">Bisque Trial</label>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="checkbox3" name="checkbox3">
                    <label for="checkbox3">Finish</label>
                </div>
        </div>

        <div class="container">
            <h1>Stage (Removable)</h1>
                <div class="form-group">
                    <input type="checkbox" id="checkbox4" name="checkbox4">
                    <label for="checkbox4">Wax Rims</label>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="checkbox5" name="checkbox5">
                    <label for="checkbox5">Denture Trial</label>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="checkbox6" name="checkbox6">
                    <label for="checkbox6">Cast Partial Denture Framework Trial</label>
                </div>
        </div>

        <div class="container1">
            <div class="row">
                <!-- upper left -->
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">1</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">2</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">3</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">4</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">5</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">6</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">7</div>
                <div class="number" data-part="Upper Left" onclick="toggleHighlight(this)">8</div>
                <div class="pipe">|</div>
                <!-- upper right -->
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">8</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">7</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">6</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">5</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">4</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">3</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">2</div>
                <div class="number" data-part="Upper Right" onclick="toggleHighlight(this)">1</div>
            </div>
            <div class="divider"></div>
            <div class="row">
                <!-- lower left -->
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">1</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">2</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">3</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">4</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">5</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">6</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">7</div>
                <div class="number" data-part="Lower Left" onclick="toggleHighlight(this)">8</div>
                <div class="pipe">|</div>
                <!-- lower right -->
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">8</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">7</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">6</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">5</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">4</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">3</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">2</div>
                <div class="number" data-part="Lower Right" onclick="toggleHighlight(this)">1</div>
            </div>
            <div id="selected-numbers">Selected Numbers: </div>
        <button type="submit">Submit</button>
        
    </div>
</form>
</div>
<button id="noteButton">Convert to PDF</button>

    <script>
        function toggleTextField(checkbox) {
            var textField = checkbox.parentNode.nextElementSibling;
            if (checkbox.checked) {
                textField.style.display = 'block';
            } else {
                textField.style.display = 'none';
            }
            
        }
        function toggleTextFields(checkbox) {
        var textField1 = checkbox.parentElement.nextElementSibling;
        var textField2 = textField1.nextElementSibling;
        
        if (checkbox.checked) {
            textField1.style.display = "block";
            textField2.style.display = "block";
        } else {
            textField1.style.display = "none";
            textField2.style.display = "none";
        }
    }
        
    const selectedNumbers = [];
    document.getElementById('noteButton').addEventListener('click', function () {
    var form = document.getElementById('dentalform');
    var formData = new FormData(form);

    // Call a function to generate PDF with form data
    generatePDF(formData);
});
function generatePDF(formData) {
    fetch('/generate-pdf', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(Object.fromEntries(formData)), // Convert FormData to JSON object
    })
    .then(response => response.blob())
    .then(blob => {
        const url = window.URL.createObjectURL(new Blob([blob]));
        const a = document.createElement('a');
        a.style.display = 'none';
        a.href = url;
        a.download = 'form.pdf';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
    })
    .catch(error => console.error('Error generating PDF:', error));
}


    document.querySelectorAll('.number').forEach(number => {
        number.addEventListener('click', () => {
            if (number.classList.contains('highlighted')) {
                number.classList.remove('highlighted');
                const index = selectedNumbers.findIndex(item => item.number === number.textContent && item.part === number.getAttribute('data-part'));
                if (index > -1) {
                    selectedNumbers.splice(index, 1);
                }
            } else {
                number.classList.add('highlighted');
                selectedNumbers.push({ number: number.textContent, part: number.getAttribute('data-part') });
            }
            document.getElementById('selected-numbers').textContent = 'Selected Tooth Numbers: ' + selectedNumbers.map(item => item.number + ' (' + item.part + ')').join(', ');
                // document.getElementById('selected-numbers').textContent = `Selected Tooth Numbers: ${selectedNumbers}`;
            });
        });
        /*function loadSerialNumber() {
            let serialNumber = localStorage.getItem('serialNumber');
            if (!serialNumber) {
                serialNumber = 1;
            } else {
                serialNumber = parseInt(serialNumber) - 1;
            }
            localStorage.setItem('serialNumber', serialNumber);
            document.getElementById('SrNo').value = serialNumber;
        }*/

        function loadDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('DateOfOrder').value = today;
            document.getElementById('DateOfDelivery').value = today;  // Assuming delivery date is same as order date initially
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            loadDate();
            // loadSerialNumber();
            let currentSrNo = localStorage.getItem('currentSrNo');
            // if (!currentSrNo) {
            //     currentSrNo = 1;
            //     localStorage.setItem('currentSrNo', currentSrNo);
            // }

            // // Set the initial SrNo value in the input field
            // document.getElementById('SrNo').value = currentSrNo;
            
        });
        window.onload = function () {
            const srNoInput = document.getElementById('SrNo');
            const storedSrNo = localStorage.getItem('SrNo');
            if (!storedSrNo) {
                srNoInput.value = 1
            }
        

            if (storedSrNo) {
                srNoInput.value = storedSrNo;
            }
        }

           
        // document.getElementById('dentalForm').addEventListener('submit', (event) => {
        //     let serialNumber = parseInt(localStorage.getItem('serialNumber'));
        //     serialNumber++;
        //     localStorage.setItem('serialNumber', serialNumber);
        //     document.getElementById('SrNo').value = serialNumber; // Update serial number in the form
        //     event.preventDefault(); // Prevent default form submission
        // });
        document.getElementById('dentalform').addEventListener('submit', function (event) {
            event.preventDefault();
            let srNo = parseInt(localStorage.getItem('SrNo') || '0');
                srNo += 1;
                localStorage.setItem('SrNo', srNo);
                srNoInput.value = srNo;
                window.location.href = 'index2.html';
        });

//                 event.preventDefault();

// const formData = {
//     drName: document.getElementById('drName').value,
//     patientName: document.getElementById('patientName').value,
//     age: document.getElementById('age').value,
//     sex: document.querySelector('input[name="sex"]:checked').value,
//     SrNo: document.getElementById('SrNo').value,
//     DateOfOrder: document.getElementById('DateOfOrder').value,
//     DateOfDelivery: document.getElementById('DateOfDelivery').value,
//     options: Array.from(document.querySelectorAll('input[name="options"]:checked')).map(cb => cb.value),
//     SHADE: document.getElementById('shade').value,
//     stageFixed: [
//         document.getElementById('checkbox1').checked ? 'Coping Trial' : '',
//         document.getElementById('checkbox2').checked ? 'Bisque Trial' : '',
//         document.getElementById('checkbox3').checked ? 'Finish' : ''
//     ].filter(Boolean),
//     stageRemovable: [
//         document.getElementById('checkbox4').checked ? 'Wax Rims' : '',
//         document.getElementById('checkbox5').checked ? 'Denture Trial' : '',
//         document.getElementById('checkbox6').checked ? 'Cast Partial Denture Framework Trial' : ''
//     ].filter(Boolean),
//     selectedNumbers: selectedNumbers
// };

// fetch('/submit', {
//     method: 'POST',
//     headers: {
//         'Content-Type': 'application/json'
//     },
//     body: JSON.stringify(formData)
// })
// .then(response => response.text())
// .then(data => alert(data))
// .catch(error => console.error('Error:', error));
//         });
    </script>
  

     <!-- Include your script file -->
     <script src="renderer.js"></script>
    

    </body>

</html>
